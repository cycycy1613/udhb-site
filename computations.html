<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urban Deca Homes Batangas - Price & Financing Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #0d47a1, #1976d2);
            color: white;
            padding: 25px 30px;
            border-bottom: 5px solid #ff9800;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .disclaimer {
            background-color: #fff8e1;
            border-left: 4px solid #ff9800;
            padding: 12px 20px;
            margin: 15px 30px;
            font-size: 14px;
            border-radius: 4px;
        }
        
        .calculator-section {
            padding: 25px 30px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .section-title {
            color: #0d47a1;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eaeaea;
            font-size: 22px;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .select-wrapper {
            position: relative;
        }
        
        select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 16px;
            background-color: white;
            appearance: none;
            cursor: pointer;
            transition: border-color 0.3s;
        }
        
        select:focus {
            outline: none;
            border-color: #1976d2;
            box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.2);
        }
        
        .select-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: #666;
        }
        
        .results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .result-card {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            border: 1px solid #eaeaea;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .result-card.highlight {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-color: #1976d2;
        }
        
        .result-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }
        
        .result-value {
            font-size: 24px;
            font-weight: 700;
            color: #0d47a1;
        }
        
        .result-unit {
            font-size: 16px;
            color: #1976d2;
        }
        
        .amortization-section {
            padding: 25px 30px;
        }
        
        .loan-term-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 25px;
        }
        
        .term-btn {
            padding: 10px 20px;
            background-color: #f1f1f1;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .term-btn:hover {
            background-color: #e3e3e3;
        }
        
        .term-btn.active {
            background-color: #1976d2;
            color: white;
        }
        
        .amortization-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .amortization-table th {
            background-color: #0d47a1;
            color: white;
            padding: 15px;
            text-align: left;
        }
        
        .amortization-table td {
            padding: 15px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .amortization-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .amortization-table tr:hover {
            background-color: #f0f7ff;
        }
        
        .gmir-row {
            background-color: #e8f5e9 !important;
            font-weight: 600;
        }
        
        footer {
            background-color: #f1f1f1;
            padding: 20px 30px;
            text-align: center;
            color: #666;
            font-size: 14px;
            border-top: 1px solid #eaeaea;
        }
        
        .footer-notes {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-top: 15px;
            font-size: 13px;
        }
        
        .footer-notes div {
            margin: 5px 10px;
        }
        
        @media (max-width: 768px) {
            .controls {
                grid-template-columns: 1fr;
            }
            
            .results {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .amortization-table {
                font-size: 14px;
            }
            
            .amortization-table th, 
            .amortization-table td {
                padding: 10px;
            }
            
            header {
                padding: 20px;
            }
            
            .calculator-section, .amortization-section {
                padding: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .results {
                grid-template-columns: 1fr;
            }
            
            .term-btn {
                flex-grow: 1;
                text-align: center;
            }
        }
        
        .no-data {
            text-align: center;
            padding: 40px;
            color: #888;
            font-style: italic;
        }
        
        .unit-area {
            font-size: 14px;
            color: #777;
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-home"></i> Urban Deca Homes Batangas</h1>
            <p class="subtitle">Price List & Financing Calculator | As of February 5, 2025</p>
        </header>
        
        <div class="disclaimer">
            <i class="fas fa-exclamation-circle"></i> <strong>Important Note:</strong> Prices are subject to change without prior notice. Interest rates change over time. These are only best estimates at this time. The final computation will be released by 8990, Pag-IBIG, or Bank.
        </div>
        
        <div class="calculator-section">
            <h2 class="section-title"><i class="fas fa-calculator"></i> Unit & Financing Selection</h2>
            
            <div class="controls">
                <div class="control-group">
                    <label for="unitType"><i class="fas fa-building"></i> Unit Type</label>
                    <div class="select-wrapper">
                        <select id="unitType">
                            <option value="">Select Unit Type</option>
                            <option value="2BR-A">2BR-A (36.34 sqm)</option>
                            <option value="2BR-B">2BR-B (36.91 sqm)</option>
                            <option value="2BR-D">2BR-D (37.11 sqm)</option>
                            <option value="3BR-A">3BR-A (44.85 sqm)</option>
                            <option value="3BR-B">3BR-B (53.64 sqm)</option>
                        </select>
                        <div class="select-icon"><i class="fas fa-chevron-down"></i></div>
                    </div>
                </div>
                
                <div class="control-group">
                    <label for="zoneLevel"><i class="fas fa-layer-group"></i> Zone / Floor Level</label>
                    <div class="select-wrapper">
                        <select id="zoneLevel">
                            <option value="">Select Zone/Floor</option>
                            <option value="2nd">2nd Floor</option>
                            <option value="3rd-4th">3rd - 4th Floor</option>
                            <option value="5th-6th">5th - 6th Floor</option>
                        </select>
                        <div class="select-icon"><i class="fas fa-chevron-down"></i></div>
                    </div>
                </div>
                
                <div class="control-group">
                    <label for="financing"><i class="fas fa-university"></i> Financing Option</label>
                    <div class="select-wrapper">
                        <select id="financing">
                            <option value="">Select Financing</option>
                            <option value="HDMF">Pag-IBIG Fund (HDMF)</option>
                            <option value="BPI">BPI MyBahay</option>
                            <option value="BDO">BDO</option>
                            <option value="SBC">Security Bank (SBC)</option>
                            <option value="SBC2">Security Bank Alt (SBC)</option>
                        </select>
                        <div class="select-icon"><i class="fas fa-chevron-down"></i></div>
                    </div>
                </div>
            </div>
            
            <div class="results">
                <div class="result-card highlight">
                    <div class="result-label">NET TOO</div>
                    <div class="result-value" id="netTooValue">₱ -</div>
                    <div class="result-unit">Total Contract Price</div>
                </div>
                
                <div class="result-card">
                    <div class="result-label">EQUITY PROMO</div>
                    <div class="result-value" id="equityPromoValue">₱ -</div>
                    <div class="result-unit">Promotional Discount</div>
                </div>
                
                <div class="result-card">
                    <div class="result-label">RESERVATION FEE (RF)</div>
                    <div class="result-value" id="rfValue">₱ -</div>
                    <div class="result-unit">One-time Payment</div>
                </div>
                
                <div class="result-card">
                    <div class="result-label">LOAN AMOUNT</div>
                    <div class="result-value" id="loanAmountValue">₱ -</div>
                    <div class="result-unit">Financing Required</div>
                </div>
            </div>
        </div>
        
        <div class="amortization-section">
            <h2 class="section-title"><i class="fas fa-table"></i> Monthly Amortization Schedule</h2>
            
            <p>Select loan term to view monthly amortization (Principal + Interest only):</p>
            
            <div class="loan-term-selector">
                <button class="term-btn active" data-term="30">30 Years</button>
                <button class="term-btn" data-term="25">25 Years</button>
                <button class="term-btn" data-term="20">20 Years</button>
                <button class="term-btn" data-term="15">15 Years</button>
                <button class="term-btn" data-term="10">10 Years</button>
                <button class="term-btn" data-term="5">5 Years</button>
            </div>
            
            <div id="amortizationTableContainer">
                <table class="amortization-table">
                    <thead>
                        <tr>
                            <th>Financing Institution</th>
                            <th>Interest Rate</th>
                            <th>Loan Term</th>
                            <th>Monthly Amortization</th>
                            <th>GMIR</th>
                        </tr>
                    </thead>
                    <tbody id="amortizationBody">
                        <tr>
                            <td colspan="5" class="no-data">Please select a unit type, zone level, and financing option to view amortization details.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <footer>
            <div>8990 Housing Development Corporation</div>
            <div>Urban Deca Homes Batangas | Price List as of February 5, 2025</div>
            
            <div class="footer-notes">
                <div><i class="fas fa-file-contract"></i> Prepared By: Maria V. Padagdag</div>
                <div><i class="fas fa-check-circle"></i> Recommended By: Roan B. Torregoza</div>
                <div><i class="fas fa-user-check"></i> Approved By: Alexander Ace Sotto</div>
            </div>
        </footer>
    </div>

    <script>
        // Data extracted from the PDF
        const propertyData = {
            "2nd": {
                "2BR-A": {
                    unitArea: "36.34",
                    netTOO: 2583984.42,
                    equityPromo: 119199.22,
                    rf: 10000,
                    loanAmount: 2454785.20,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 15114.53, gmir: 43184.38 },
                        BPI: { rate: "7.000%", term: 30, monthly: 16331.75, gmir: 40829.37 },
                        BDO: { rate: "6.500%", term: 20, monthly: 18302.22, gmir: 52292.05 },
                        SBC: { rate: "6.800%", term: 20, monthly: 18738.35, gmir: 50000.00 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 15677.70, gmir: 50000.00 }
                    }
                },
                "2BR-B": {
                    unitArea: "36.91",
                    netTOO: 2624052.42,
                    equityPromo: 121202.62,
                    rf: 10000,
                    loanAmount: 2492849.80,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 15348.90, gmir: 43854.01 },
                        BPI: { rate: "7.000%", term: 30, monthly: 16584.99, gmir: 41462.48 },
                        BDO: { rate: "6.500%", term: 20, monthly: 18586.02, gmir: 53102.91 },
                        SBC: { rate: "6.800%", term: 20, monthly: 19028.91, gmir: 50000.00 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 15920.81, gmir: 50000.00 }
                    }
                },
                "2BR-D": {
                    unitArea: "37.11",
                    netTOO: 2638111.37,
                    equityPromo: 121905.57,
                    rf: 10000,
                    loanAmount: 2506205.80,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 15431.14, gmir: 44088.97 },
                        BPI: { rate: "7.000%", term: 30, monthly: 16673.85, gmir: 41684.62 },
                        BDO: { rate: "6.500%", term: 20, monthly: 18685.60, gmir: 53387.42 },
                        SBC: { rate: "6.800%", term: 20, monthly: 19130.86, gmir: 50000.00 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 16006.10, gmir: 50000.00 }
                    }
                },
                "3BR-A": {
                    unitArea: "44.85",
                    netTOO: 3157982.11,
                    equityPromo: 142899.11,
                    rf: 15000,
                    loanAmount: 3000083.00,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 18472.03, gmir: 52777.22 },
                        BPI: { rate: "7.000%", term: 30, monthly: 19959.63, gmir: 49899.07 },
                        BDO: { rate: "6.500%", term: 20, monthly: 22367.81, gmir: 63908.04 },
                        SBC: { rate: "6.800%", term: 20, monthly: 22900.82, gmir: 57252.05 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 19160.29, gmir: 50000.00 }
                    }
                },
                "3BR-B": {
                    unitArea: "53.64",
                    netTOO: 3775872.84,
                    equityPromo: 173793.64,
                    rf: 15000,
                    loanAmount: 3587079.20,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 22086.26, gmir: 63103.61 },
                        BPI: { rate: "7.000%", term: 30, monthly: 23864.93, gmir: 59662.32 },
                        BDO: { rate: "6.500%", term: 20, monthly: 26744.30, gmir: 76412.28 },
                        SBC: { rate: "6.800%", term: 20, monthly: 27381.59, gmir: 68453.98 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 22909.20, gmir: 57272.99 }
                    }
                }
            },
            "3rd-4th": {
                "2BR-A": {
                    unitArea: "36.34",
                    netTOO: 2606300.21,
                    equityPromo: 120315.01,
                    rf: 10000,
                    loanAmount: 2475985.20,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 15245.07, gmir: 43557.33 },
                        BPI: { rate: "7.000%", term: 30, monthly: 16472.79, gmir: 41181.98 },
                        BDO: { rate: "6.500%", term: 20, monthly: 18460.28, gmir: 52743.66 },
                        SBC: { rate: "6.800%", term: 20, monthly: 18900.17, gmir: 50000.00 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 15813.10, gmir: 50000.00 }
                    }
                },
                "2BR-B": {
                    unitArea: "36.91",
                    netTOO: 2646368.21,
                    equityPromo: 122318.41,
                    rf: 10000,
                    loanAmount: 2514049.80,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 15479.44, gmir: 44226.96 },
                        BPI: { rate: "7.000%", term: 30, monthly: 16726.04, gmir: 41815.09 },
                        BDO: { rate: "6.500%", term: 20, monthly: 18744.08, gmir: 53554.51 },
                        SBC: { rate: "6.800%", term: 20, monthly: 19190.74, gmir: 50000.00 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 16056.20, gmir: 50000.00 }
                    }
                },
                "2BR-D": {
                    unitArea: "37.11",
                    netTOO: 2660427.16,
                    equityPromo: 123021.36,
                    rf: 10000,
                    loanAmount: 2527405.80,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 15561.67, gmir: 44461.92 },
                        BPI: { rate: "7.000%", term: 30, monthly: 16814.89, gmir: 42037.23 },
                        BDO: { rate: "6.500%", term: 20, monthly: 18843.66, gmir: 53839.02 },
                        SBC: { rate: "6.800%", term: 20, monthly: 19292.69, gmir: 50000.00 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 16141.50, gmir: 50000.00 }
                    }
                },
                "3BR-A": {
                    unitArea: "44.85",
                    netTOO: 3180297.89,
                    equityPromo: 144014.89,
                    rf: 15000,
                    loanAmount: 3021283.00,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 18602.56, gmir: 53150.17 },
                        BPI: { rate: "7.000%", term: 30, monthly: 20100.67, gmir: 50251.68 },
                        BDO: { rate: "6.500%", term: 20, monthly: 22525.87, gmir: 64359.64 },
                        SBC: { rate: "6.800%", term: 20, monthly: 23062.65, gmir: 57656.62 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 19295.69, gmir: 50000.00 }
                    }
                },
                "3BR-B": {
                    unitArea: "53.64",
                    netTOO: 3798188.63,
                    equityPromo: 174909.43,
                    rf: 15000,
                    loanAmount: 3608279.20,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 22216.80, gmir: 63476.56 },
                        BPI: { rate: "7.000%", term: 30, monthly: 24005.97, gmir: 60014.93 },
                        BDO: { rate: "6.500%", term: 20, monthly: 26902.36, gmir: 76863.89 },
                        SBC: { rate: "6.800%", term: 20, monthly: 27543.42, gmir: 68858.55 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 23044.59, gmir: 57611.48 }
                    }
                }
            },
            "5th-6th": {
                "2BR-A": {
                    unitArea: "36.34",
                    netTOO: 2628616.00,
                    equityPromo: 121430.80,
                    rf: 10000,
                    loanAmount: 2497185.20,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 15375.60, gmir: 43930.28 },
                        BPI: { rate: "7.000%", term: 30, monthly: 16613.84, gmir: 41534.59 },
                        BDO: { rate: "6.500%", term: 20, monthly: 18618.34, gmir: 53195.26 },
                        SBC: { rate: "6.800%", term: 20, monthly: 19062.00, gmir: 50000.00 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 15948.49, gmir: 50000.00 }
                    }
                },
                "2BR-B": {
                    unitArea: "36.91",
                    netTOO: 2668684.00,
                    equityPromo: 123434.20,
                    rf: 10000,
                    loanAmount: 2535249.80,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 15609.97, gmir: 44599.91 },
                        BPI: { rate: "7.000%", term: 30, monthly: 16867.08, gmir: 42167.70 },
                        BDO: { rate: "6.500%", term: 20, monthly: 18902.14, gmir: 54006.12 },
                        SBC: { rate: "6.800%", term: 20, monthly: 19352.56, gmir: 50000.00 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 16191.60, gmir: 50000.00 }
                    }
                },
                "2BR-D": {
                    unitArea: "37.11",
                    netTOO: 2682742.95,
                    equityPromo: 124137.15,
                    rf: 10000,
                    loanAmount: 2548605.80,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 15692.20, gmir: 44834.87 },
                        BPI: { rate: "7.000%", term: 30, monthly: 16955.94, gmir: 42389.84 },
                        BDO: { rate: "6.500%", term: 20, monthly: 19001.72, gmir: 54290.63 },
                        SBC: { rate: "6.800%", term: 20, monthly: 19454.52, gmir: 50000.00 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 16276.90, gmir: 50000.00 }
                    }
                },
                "3BR-A": {
                    unitArea: "44.85",
                    netTOO: 3202613.68,
                    equityPromo: 145130.68,
                    rf: 15000,
                    loanAmount: 3042483.00,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 18733.09, gmir: 53523.12 },
                        BPI: { rate: "7.000%", term: 30, monthly: 20241.72, gmir: 50604.29 },
                        BDO: { rate: "6.500%", term: 20, monthly: 22683.94, gmir: 64811.25 },
                        SBC: { rate: "6.800%", term: 20, monthly: 23224.48, gmir: 58061.19 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 19431.09, gmir: 50000.00 }
                    }
                },
                "3BR-B": {
                    unitArea: "53.64",
                    netTOO: 3820504.42,
                    equityPromo: 176025.22,
                    rf: 15000,
                    loanAmount: 3629479.20,
                    amortizations: {
                        HDMF: { rate: "6.250%", term: 30, monthly: 22347.33, gmir: 63849.51 },
                        BPI: { rate: "7.000%", term: 30, monthly: 24147.02, gmir: 60367.54 },
                        BDO: { rate: "6.500%", term: 20, monthly: 27060.42, gmir: 77315.49 },
                        SBC: { rate: "6.800%", term: 20, monthly: 27705.25, gmir: 69263.12 },
                        SBC2: { rate: "6.800%", term: 20, monthly: 23179.99, gmir: 57949.97 }
                    }
                }
            }
        };

        // DOM elements
        const unitTypeSelect = document.getElementById('unitType');
        const zoneLevelSelect = document.getElementById('zoneLevel');
        const financingSelect = document.getElementById('financing');
        const termButtons = document.querySelectorAll('.term-btn');
        const netTooValue = document.getElementById('netTooValue');
        const equityPromoValue = document.getElementById('equityPromoValue');
        const rfValue = document.getElementById('rfValue');
        const loanAmountValue = document.getElementById('loanAmountValue');
        const amortizationBody = document.getElementById('amortizationBody');
        
        // Selected values
        let selectedUnitType = '';
        let selectedZone = '';
        let selectedFinancing = '';
        let selectedTerm = '30'; // Default to 30 years
        
        // Format currency in PHP
        function formatCurrency(amount) {
            return '₱ ' + amount.toLocaleString('en-PH', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }
        
        // Update the main results display
        function updateResults() {
            if (selectedUnitType && selectedZone && propertyData[selectedZone] && propertyData[selectedZone][selectedUnitType]) {
                const data = propertyData[selectedZone][selectedUnitType];
                
                netTooValue.textContent = formatCurrency(data.netTOO);
                equityPromoValue.textContent = formatCurrency(data.equityPromo);
                rfValue.textContent = formatCurrency(data.rf);
                loanAmountValue.textContent = formatCurrency(data.loanAmount);
            } else {
                netTooValue.textContent = '₱ -';
                equityPromoValue.textContent = '₱ -';
                rfValue.textContent = '₱ -';
                loanAmountValue.textContent = '₱ -';
            }
        }
        
        // Update amortization table based on selections
        function updateAmortizationTable() {
            if (!selectedUnitType || !selectedZone || !selectedFinancing) {
                amortizationBody.innerHTML = `
                    <tr>
                        <td colspan="5" class="no-data">Please select a unit type, zone level, and financing option to view amortization details.</td>
                    </tr>
                `;
                return;
            }
            
            const data = propertyData[selectedZone][selectedUnitType];
            if (!data) return;
            
            const amortizationData = data.amortizations[selectedFinancing];
            if (!amortizationData) return;
            
            // Calculate amortization for different terms based on the selected financing
            const monthlyData = calculateAmortizationForTerms(
                data.loanAmount, 
                parseFloat(amortizationData.rate) / 100, 
                amortizationData.term,
                selectedTerm
            );
            
            let tableHTML = '';
            
            // Add the main row for the selected financing
            tableHTML += `
                <tr class="gmir-row">
                    <td>${getInstitutionName(selectedFinancing)}</td>
                    <td>${amortizationData.rate}</td>
                    <td>${selectedTerm} years</td>
                    <td>${formatCurrency(monthlyData.selectedTermMonthly)}</td>
                    <td>${formatCurrency(amortizationData.gmir)}</td>
                </tr>
            `;
            
            // Add rows for other terms
            for (const term of Object.keys(monthlyData.otherTerms)) {
                tableHTML += `
                    <tr>
                        <td>${getInstitutionName(selectedFinancing)}</td>
                        <td>${amortizationData.rate}</td>
                        <td>${term} years</td>
                        <td>${formatCurrency(monthlyData.otherTerms[term])}</td>
                        <td>-</td>
                    </tr>
                `;
            }
            
            amortizationBody.innerHTML = tableHTML;
        }
        
        // Calculate monthly amortization for different terms
        function calculateAmortizationForTerms(loanAmount, annualRate, originalTerm, selectedTerm) {
            const terms = [30, 25, 20, 15, 10, 5];
            const result = { otherTerms: {} };
            
            // Calculate for selected term
            const monthlyRate = annualRate / 12;
            const selectedTermMonths = parseInt(selectedTerm) * 12;
            
            // Monthly payment formula: P * r * (1+r)^n / ((1+r)^n - 1)
            const selectedTermMonthly = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, selectedTermMonths) / 
                                      (Math.pow(1 + monthlyRate, selectedTermMonths) - 1);
            
            result.selectedTermMonthly = selectedTermMonthly;
            
            // Calculate for other terms
            for (const term of terms) {
                if (term.toString() !== selectedTerm) {
                    const termMonths = term * 12;
                    const monthly = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, termMonths) / 
                                   (Math.pow(1 + monthlyRate, termMonths) - 1);
                    result.otherTerms[term] = monthly;
                }
            }
            
            return result;
        }
        
        // Get full institution name
        function getInstitutionName(code) {
            const names = {
                HDMF: "Pag-IBIG Fund (HDMF)",
                BPI: "BPI MyBahay",
                BDO: "BDO",
                SBC: "Security Bank (SBC)",
                SBC2: "Security Bank Alt (SBC)"
            };
            return names[code] || code;
        }
        
        // Event listeners for dropdowns
        unitTypeSelect.addEventListener('change', function() {
            selectedUnitType = this.value;
            updateResults();
            updateAmortizationTable();
        });
        
        zoneLevelSelect.addEventListener('change', function() {
            selectedZone = this.value;
            updateResults();
            updateAmortizationTable();
        });
        
        financingSelect.addEventListener('change', function() {
            selectedFinancing = this.value;
            updateAmortizationTable();
        });
        
        // Event listeners for term buttons
        termButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons
                termButtons.forEach(btn => btn.classList.remove('active'));
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // Update selected term
                selectedTerm = this.getAttribute('data-term');
                
                // Update amortization table
                updateAmortizationTable();
            });
        });
        
        // Initialize with default values
        updateResults();
        updateAmortizationTable();
    </script>
</body>
</html>
